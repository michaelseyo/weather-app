(()=>{"use strict";function e(){return document.querySelector("#metric").classList.contains("active")?"metric":"imperial"}function t(e){return Math.round(1*e)/1}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e,t){return function(e){let t;t=e.replace("GMT",""),t=t.replace(",","");const n=t.split(" "),c=function(e){const t=e.split(":");return("12"!=t[0]?t[0]%12:12)+":"+t[1]+(t[0]>=12?"pm":"am")}(n[4]);return n[4]=c,t=n.join(" "),t}(new Date(1e3*t+1e3*e).toUTCString())}let r=null;function o(o,i,l){const u=e(),d=document.querySelector(".hourly");let s,m,p,h,y;null==r?(s=document.createElement("ul"),s.id=`hour${l}Weather-ul`,m=document.createElement("li"),m.id=`hour${l}Time-li`,p=document.createElement("img"),p.id=`hour${l}Weather-img`,h=document.createElement("li"),h.id=`hour${l}WeatherDesc-li`,y=document.createElement("li"),y.id=`hour${l}TemperatureText-li`):(s=document.querySelector(`#hour${l}Weather-ul`),m=document.querySelector(`#hour${l}Time-li`),p=document.querySelector(`#hour${l}Weather-img`),h=document.querySelector(`#hour${l}WeatherDesc-li`),y=document.querySelector(`#hour${l}TemperatureText-li`));const f=c(i,o.dt),g=function(e){const t=e.split(" ");return"0:00am"==t[4]?"12:00am":t[4]}(f);m.textContent=g,p.src=a(f,o.weather[0].description),h.textContent=n(o.weather[0].description),y.textContent="metric"==u?t(o.temp)+"째C":t(o.temp)+"째F",s.appendChild(m),s.appendChild(p),s.appendChild(h),s.appendChild(y),d.appendChild(s)}function a(e,t){const n=t.toLowerCase(),c=function(e){const t=e.split(" ")[4],n=t.split(":")[0],c=t.split(":")[1].slice(2);let r;return r=n>=7&&"pm"==c||n<=6&&"am"==c?"night":"day",r}(e);let r;return n.includes("thunderstorm")?r="11d":["drizzle","shower rain"].includes(n)?r="09d":n.includes("rain")&&"freezing rain"!=n&&!n.includes("snow")?r="day"==c?"10d":"10n":n.includes("freezing rain")||n.includes("snow")||n.includes("sleet")?r="13d":["mist","smoke","haze","sand","fog","dust","volcanic ash","squails","tornado"].includes(n)?r="50d":n.includes("clear sky")?r="day"==c?"01d":"01n":"few clouds"==n?r="day"==c?"02d":"02n":"scattered clouds"==n?r="day"==c?"03d":"03n":["broken clouds","overcast clouds"].includes(n)&&(r="day"==c?"04d":"04n"),`http://openweathermap.org/img/wn/${r}@2x.png`}const i=function(i){console.log(i.data);const l=i.location,u=i.data.current,d=i.data.hourly,s=i.data.timezone_offset;!function(o,i,l){const u=e(),d=document.querySelector(".current");let s,m,p,h,y,f;null==r?(s=document.createElement("ul"),s.id="currWeather-ul",m=document.createElement("li"),m.id="currTime-li",p=document.createElement("li"),p.id="currLocationText-li",h=document.createElement("img"),h.id="currWeather-img",y=document.createElement("li"),y.id="currWeatherDesc-li",f=document.createElement("li"),f.id="currTemperatureText-li"):(s=document.querySelector("#currWeather-ul"),m=document.querySelector("#currTime-li"),p=document.querySelector("#currLocationText-li"),h=document.querySelector("#currWeather-img"),y=document.querySelector("#currWeatherDesc-li"),f=document.querySelector("#currTemperatureText-li"));const g=c(i,o.dt);m.textContent=g,p.textContent=function(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join(" ")}(l),h.src=a(g,o.weather[0].description),y.textContent=n(o.weather[0].description),f.textContent="metric"==u?t(o.temp)+"째C":t(o.temp)+"째F",s.appendChild(m),s.appendChild(p),s.appendChild(h),s.appendChild(y),s.appendChild(f),d.appendChild(s)}(u,s,l);for(let e=1;e<25;e++)o(d[e],s,e);r=l},l="36b3c347e210c2acb6e17f82bab1563c",u=async function(e){e.preventDefault();try{const e=await async function(e){try{const e=document.querySelector("#search-bar").value;console.log("searched location: "+e);const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&exclude=minutely&appid=${l}`),n=await t.json();return console.log(n),{coord:n.coord,location:e}}catch(e){console.log(e)}}(),t=e.coord,n=e.location,c="metric",r=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=${c}&exclude=minutely&appid=${l}`);return{data:await r.json(),location:n}}catch{console.log(error)}},d="36b3c347e210c2acb6e17f82bab1563c";document.onload=async function(){try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Singapore&exclude=minutes&appid=${d}`),t=(await e.json()).coord,n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=metric&exclude=minutes&appid=${d}`),c=await n.json();i({data:c,location:"Singapore"})}catch(e){console.log(e)}}(),function(){const e=document.querySelector("#search-icon");e.addEventListener("click",(async e=>{const t=await u(e);i(t)})),e.addEventListener("keyup",(async e=>{if("Enter"==e.key){const t=await u(e);i(t)}}))}(),function(){const e=document.querySelectorAll("button");let t=document.querySelector("#metric");e.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),e.currentTarget.classList.add("active"),t!=e.currentTarget&&t.classList.remove("active"),t=e.currentTarget}))))}()})();