(()=>{"use strict";function e(e){return Math.round(1*e)/1}function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e,t){return function(e){let t;t=e.replace("GMT",""),t=t.replace(",","");const n=t.split(" "),r=function(e){const t=e.split(":");return("12"!=t[0]?t[0]%12:12)+":"+t[1]+(t[0]>=12?"pm":"am")}(n[4]);return n[4]=r,t=n.join(" "),t}(new Date(1e3*t+1e3*e).toUTCString())}function r(e){const t=e.split(" ");return"0:00am"==t[4]?"12:00am":t[4]}let c=null;function i(i,l,a,u,d){let s,m,p,h,y,C,g,S;s="hour"==d?document.querySelector(".hourly"):document.querySelector(".daily"),null==c?(m=document.createElement("ul"),m.id=`${d}${a}Weather-ul`,p=document.createElement("li"),p.id=`${d}${a}Time-li`,h=document.createElement("img"),h.id=`${d}${a}Weather-img`,y=document.createElement("li"),y.id=`${d}${a}WeatherDesc-li`,"hour"==d?(C=document.createElement("li"),C.id=`${d}${a}TemperatureText-li`):(g=document.createElement("li"),g.id=`${d}${a}minTempText-li`,S=document.createElement("li"),S.id=`${d}${a}maxTempText-li`)):(m=document.querySelector(`#${d}${a}Weather-ul`),p=document.querySelector(`#${d}${a}Time-li`),h=document.querySelector(`#${d}${a}Weather-img`),y=document.querySelector(`#${d}${a}WeatherDesc-li`),"hour"==d?C=document.querySelector(`#${d}${a}TemperatureText-li`):(g=document.querySelector(`#${d}${a}minTempText-li`),S=document.querySelector(`#${d}${a}maxTempText-li`)));const $=n(l,i.dt);if(h.src=o($,i.weather[0].description,d),y.textContent=t(i.weather[0].description),"hour"==d){const t=r($);p.textContent=t,C.textContent="metric"==u?e(i.temp)+"°C":e(i.temp)+"°F"}else{const t=$.split(" ").slice(0,3).join(" ");p.textContent=t,g.textContent="metric"==u?"Min: "+e(i.temp.min)+"°C":"Min: "+e(i.temp.min)+"°F",S.textContent="metric"==u?"Max: "+e(i.temp.max)+"°C":"Max: "+e(i.temp.max)+"°F"}m.appendChild(p),m.appendChild(h),m.appendChild(y),"hour"==d?m.appendChild(C):(m.appendChild(g),m.appendChild(S)),s.appendChild(m)}function o(e,t,n){const r=t.toLowerCase(),c="hour"==n?function(e){const t=e.split(" ")[4],n=t.split(":")[0],r=t.split(":")[1].slice(2);let c;return c=n>=7&&"pm"==r||n<=6&&"am"==r?"night":"day",c}(e):"day";let i;return r.includes("thunderstorm")?i="11d":["drizzle","shower rain"].includes(r)?i="09d":r.includes("rain")&&"freezing rain"!=r&&!r.includes("snow")?i="day"==c?"10d":"10n":r.includes("freezing rain")||r.includes("snow")||r.includes("sleet")?i="13d":["mist","smoke","haze","sand","fog","dust","volcanic ash","squails","tornado"].includes(r)?i="50d":r.includes("clear sky")?i="day"==c?"01d":"01n":"few clouds"==r?i="day"==c?"02d":"02n":"scattered clouds"==r?i="day"==c?"03d":"03n":["broken clouds","overcast clouds"].includes(r)&&(i="day"==c?"04d":"04n"),`http://openweathermap.org/img/wn/${i}@2x.png`}const l=function(l){const a=document.querySelector("#metric").classList.contains("active")?"metric":"imperial";console.log(l.data);const u=l.location,d=l.data.current,s=l.data.hourly,m=l.data.daily,p=l.data.timezone_offset;!function(i,l,a,u){const d=document.querySelector(".current");let s,m,p,h,y,C,g,S,$,f,x,q,w,E,T,W;null==c?(s=document.createElement("ul"),s.id="currWeather-ul",m=document.createElement("li"),m.id="currTime-li",p=document.createElement("li"),p.id="currLocationText-li",h=document.createElement("img"),h.id="currWeather-img",y=document.createElement("li"),y.id="currWeatherDesc-li",C=document.createElement("li"),C.id="currTemperatureText-li",S=document.createElement("li"),S.id="currFeelsLike-li",g=document.createElement("ul"),g.id="currWeatherDetails-ul",$=document.createElement("li"),$.id="currHumidity-li",f=document.createElement("li"),f.id="currPressure-li",x=document.createElement("li"),x.id="currSunrise-li",q=document.createElement("img"),q.id="currSunrise-img",w=document.createElement("li"),w.id="currSunset-li",E=document.createElement("img"),E.id="currSunset-img",T=document.createElement("li"),T.id="currWindspeed-li",W=document.createElement("img"),W.id="currWind-img"):(s=document.querySelector("#currWeather-ul"),g=document.querySelector("#currWeatherDetails-ul"),m=document.querySelector("#currTime-li"),p=document.querySelector("#currLocationText-li"),h=document.querySelector("#currWeather-img"),y=document.querySelector("#currWeatherDesc-li"),C=document.querySelector("#currTemperatureText-li"),S=document.querySelector("#currFeelsLike-li"),g=document.querySelector("#currWeatherDetails-ul"),$=document.querySelector("#currHumidity-li"),f=document.querySelector("#currPressure-li"),x=document.querySelector("#currSunrise-li"),q=document.querySelector("#currSunrise-img"),w=document.querySelector("#currSunset-li"),E=document.querySelector("#currSunset-img"),T=document.querySelector("#currWindspeed-li"),W=document.querySelector("#currWind-img"));const b=n(l,i.dt);m.textContent=b,p.textContent=function(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join(" ")}(a),h.src=o(b,i.weather[0].description),y.textContent=t(i.weather[0].description),C.textContent="metric"==u?e(i.temp)+"°C":e(i.temp)+"°F";const k="metric"==u?e(i.feels_like)+"°C":e(i.feels_like)+"°F";S.textContent=`Feels like: ${k}`,$.textContent=`Humidity: ${i.humidity}%`,f.textContent=`Pressure: ${i.pressure}hPa`,x.textContent=r(n(l,i.sunrise)),q.src="https://cdn.icon-icons.com/icons2/1370/PNG/512/if-weather-27-2682824_90788.png",w.textContent=r(n(l,i.sunset)),E.src="https://cdn.icon-icons.com/icons2/1370/PNG/512/if-weather-26-2682825_90789.png",T.textContent=`Wind speed: ${i.wind_speed}`,W.src="https://cdn.icon-icons.com/icons2/571/PNG/512/wind-weather-lines-group-symbol_icon-icons.com_54629.png",s.appendChild(m),s.appendChild(p),s.appendChild(h),s.appendChild(y),s.appendChild(C),s.appendChild(S),d.appendChild(s),g.appendChild($),g.appendChild(f),g.appendChild(q),g.appendChild(x),g.appendChild(E),g.appendChild(w),g.appendChild(W),g.appendChild(T),d.appendChild(g)}(d,p,u,a);for(let e=1;e<25;e++)i(s[e],p,e,a,"hour");for(let e=1;e<8;e++)i(m[e],p,e,a,"day");c=u},a="36b3c347e210c2acb6e17f82bab1563c",u=async function(e){e.preventDefault();try{const e=await async function(e){try{const e=document.querySelector("#search-bar").value;console.log("searched location: "+e);const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&exclude=minutely&appid=${a}`),n=await t.json();return console.log(n),{coord:n.coord,location:e}}catch(e){console.log(e)}}(),t=e.coord,n=e.location,r="metric",c=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=${r}&exclude=minutely&appid=${a}`);return{data:await c.json(),location:n}}catch{console.log(error)}},d="36b3c347e210c2acb6e17f82bab1563c";document.onload=async function(){try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Singapore&exclude=minutes&appid=${d}`),t=(await e.json()).coord,n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=metric&exclude=minutes&appid=${d}`),r=await n.json();l({data:r,location:"Singapore"})}catch(e){console.log(e)}}(),function(){const e=document.querySelector("#search-icon");e.addEventListener("click",(async e=>{const t=await u(e);l(t)})),e.addEventListener("keyup",(async e=>{if("Enter"==e.key){const t=await u(e);l(t)}}))}(),function(){const e=document.querySelectorAll("button");let t=document.querySelector("#metric");e.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),e.currentTarget.classList.add("active"),t!=e.currentTarget&&t.classList.remove("active"),t=e.currentTarget}))))}()})();