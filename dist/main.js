(()=>{"use strict";function e(e){return Math.round(1*e)/1}let t=null;const c=function(c){console.log(c.data);const a=c.location;!function(c,a){const n=document.querySelector("#metric").classList.contains("active")?"metric":"imperial",o=document.querySelector(".info");let r,l,i,u;var s;null==t?(r=document.createElement("ul"),r.id="weather-ul",l=document.createElement("li"),l.id="locationText-li",i=document.createElement("li"),i.id="weatherDesc-li",u=document.createElement("li"),u.id="temperatureText-li"):(r=document.querySelector("#weather-ul"),l=document.querySelector("#locationText-li"),i=document.querySelector("#weatherDesc-li"),u=document.querySelector("#temperatureText-li")),l.textContent=function(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join(" ")}(a),t=a,i.textContent=(s=c.weather[0].description).charAt(0).toUpperCase()+s.slice(1),u.textContent="metric"==n?e(c.temp)+"°C":e(c.temp)+"°F",r.appendChild(l),r.appendChild(i),r.appendChild(u),o.appendChild(r)}(c.data.current,a)},a="36b3c347e210c2acb6e17f82bab1563c",n=async function(e){e.preventDefault();try{const e=await async function(e){try{const e=document.querySelector("#search-bar").value;console.log("searched location: "+e);const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&exclude=minutely&appid=${a}`),c=await t.json();return console.log(c),{coord:c.coord,location:e}}catch(e){console.log(e)}}(),t=e.coord,c=e.location,n="metric",o=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=${n}&exclude=minutely&appid=${a}`);return{data:await o.json(),location:c}}catch{console.log(error)}},o="36b3c347e210c2acb6e17f82bab1563c";document.onload=async function(){try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Singapore&exclude=minutes&appid=${o}`),t=(await e.json()).coord,a=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=metric&exclude=minutes&appid=${o}`),n=await a.json();c({data:n,location:"Singapore"})}catch(e){console.log(e)}}(),function(){const e=document.querySelector("#search-icon");e.addEventListener("click",(async e=>{const t=await n(e);c(t)})),e.addEventListener("keyup",(async e=>{if("Enter"==e.key){const t=await n(e);c(t)}}))}(),function(){const e=document.querySelectorAll("button");let t=document.querySelector("#metric");e.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),e.currentTarget.classList.add("active"),t!=e.currentTarget&&t.classList.remove("active"),t=e.currentTarget}))))}()})();