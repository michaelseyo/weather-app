(()=>{"use strict";function e(e){return Math.round(1*e)/1}let t=null;const n=function(n){console.log(n.data);const c=n.location;!function(n,c,o){const a=document.querySelector("#metric").classList.contains("active")?"metric":"imperial",r=document.querySelector(".info");let i,l,u,d,s,p;var m;null==t?(i=document.createElement("ul"),i.id="weather-ul",l=document.createElement("li"),l.id="time-li",u=document.createElement("li"),u.id="locationText-li",d=document.createElement("img"),d.id="weather-img",s=document.createElement("li"),s.id="weatherDesc-li",p=document.createElement("li"),p.id="temperatureText-li"):(i=document.querySelector("#weather-ul"),l=document.querySelector("#time-li"),u=document.querySelector("#locationText-li"),d=document.querySelector("#weather-img"),s=document.querySelector("#weatherDesc-li"),p=document.querySelector("#temperatureText-li")),l.textContent=function(e){const t=Date.now();return function(e){let t;t=e.replace("GMT",""),t=t.replace(",","");const n=t.split(" "),c=function(e){const t=e.split(":");return("12"!=t[0]?t[0]%12:12)+":"+t[1]+(t[0]>=12?"pm":"am")}(n[4]);return n[4]=c,t=n.join(" "),t}(new Date(t+1e3*e).toUTCString())}(c),u.textContent=function(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join(" ")}(o),t=o,d=void n.weather[0].description,s.textContent=(m=n.weather[0].description).charAt(0).toUpperCase()+m.slice(1),p.textContent="metric"==a?e(n.temp)+"°C":e(n.temp)+"°F",i.appendChild(l),i.appendChild(u),i.appendChild(s),i.appendChild(p),r.appendChild(i)}(n.data.current,n.data.timezone_offset,c)},c="36b3c347e210c2acb6e17f82bab1563c",o=async function(e){e.preventDefault();try{const e=await async function(e){try{const e=document.querySelector("#search-bar").value;console.log("searched location: "+e);const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&exclude=minutely&appid=${c}`),n=await t.json();return console.log(n),{coord:n.coord,location:e}}catch(e){console.log(e)}}(),t=e.coord,n=e.location,o="metric",a=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=${o}&exclude=minutely&appid=${c}`);return{data:await a.json(),location:n}}catch{console.log(error)}},a="36b3c347e210c2acb6e17f82bab1563c";document.onload=async function(){try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Singapore&exclude=minutes&appid=${a}`),t=(await e.json()).coord,c=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=metric&exclude=minutes&appid=${a}`),o=await c.json();n({data:o,location:"Singapore"})}catch(e){console.log(e)}}(),function(){const e=document.querySelector("#search-icon");e.addEventListener("click",(async e=>{const t=await o(e);n(t)})),e.addEventListener("keyup",(async e=>{if("Enter"==e.key){const t=await o(e);n(t)}}))}(),function(){const e=document.querySelectorAll("button");let t=document.querySelector("#metric");e.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),e.currentTarget.classList.add("active"),t!=e.currentTarget&&t.classList.remove("active"),t=e.currentTarget}))))}()})();