(()=>{"use strict";function e(){return document.querySelector("#metric").classList.contains("active")?"metric":"imperial"}function t(e){return Math.round(1*e)/1}function n(e){return e.charAt(0).toUpperCase()+e.slice(1)}function r(e,t){return function(e){let t;t=e.replace("GMT",""),t=t.replace(",","");const n=t.split(" "),r=function(e){const t=e.split(":");return("12"!=t[0]?t[0]%12:12)+":"+t[1]+(t[0]>=12?"pm":"am")}(n[4]);return n[4]=r,t=n.join(" "),t}(new Date(1e3*t+1e3*e).toUTCString())}function c(e){const t=e.split(" ");return"0:00am"==t[4]?"12:00am":t[4]}let i=null;function o(o){const a=e();console.log(o.data);const d=o.location,m=o.data.current,s=o.data.hourly,p=o.data.daily,h=o.data.timezone_offset;!function(e,o,l,a){const d=document.querySelector(".current");let m,s,p,h,y,C,f,S,$,x,g,q,T,w,E,W;null==i?(m=document.createElement("ul"),m.id="currWeather-ul",s=document.createElement("li"),s.id="currTime-li",p=document.createElement("li"),p.id="currLocationText-li",h=document.createElement("img"),h.id="currWeather-img",y=document.createElement("li"),y.id="currWeatherDesc-li",C=document.createElement("li"),C.id="currTempText-li",S=document.createElement("li"),S.id="currFeelsLike-li",f=document.createElement("ul"),f.id="currWeatherDetails-ul",$=document.createElement("li"),$.id="currHumidity-li",x=document.createElement("li"),x.id="currPressure-li",g=document.createElement("li"),g.id="currSunrise-li",q=document.createElement("img"),q.id="currSunrise-img",T=document.createElement("li"),T.id="currSunset-li",w=document.createElement("img"),w.id="currSunset-img",E=document.createElement("li"),E.id="currWindspeed-li",W=document.createElement("img"),W.id="currWind-img"):(m=document.querySelector("#currWeather-ul"),f=document.querySelector("#currWeatherDetails-ul"),s=document.querySelector("#currTime-li"),p=document.querySelector("#currLocationText-li"),h=document.querySelector("#currWeather-img"),y=document.querySelector("#currWeatherDesc-li"),C=document.querySelector("#currTempText-li"),S=document.querySelector("#currFeelsLike-li"),f=document.querySelector("#currWeatherDetails-ul"),$=document.querySelector("#currHumidity-li"),x=document.querySelector("#currPressure-li"),g=document.querySelector("#currSunrise-li"),q=document.querySelector("#currSunrise-img"),T=document.querySelector("#currSunset-li"),w=document.querySelector("#currSunset-img"),E=document.querySelector("#currWindspeed-li"),W=document.querySelector("#currWind-img"));const k=r(o,e.dt);s.textContent=k,p.textContent=function(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join(" ")}(l),h.src=u(k,e.weather[0].description),y.textContent=n(e.weather[0].description),C.textContent="metric"==a?t(e.temp)+"°C":t(e.temp)+"°F";const b="metric"==a?t(e.feels_like)+"°C":t(e.feels_like)+"°F";S.textContent=`Feels like: ${b}`,$.textContent=`Humidity: ${e.humidity}%`,x.textContent=`Pressure: ${e.pressure}hPa`,g.textContent=c(r(o,e.sunrise)),q.src="https://cdn.icon-icons.com/icons2/1370/PNG/512/if-weather-27-2682824_90788.png",T.textContent=c(r(o,e.sunset)),w.src="https://cdn.icon-icons.com/icons2/1370/PNG/512/if-weather-26-2682825_90789.png",E.textContent=`Wind speed: ${e.wind_speed}m/s`,W.src="https://cdn.icon-icons.com/icons2/571/PNG/512/wind-weather-lines-group-symbol_icon-icons.com_54629.png",m.appendChild(s),m.appendChild(p),m.appendChild(h),m.appendChild(y),m.appendChild(C),m.appendChild(S),d.appendChild(m),f.appendChild($),f.appendChild(x),f.appendChild(q),f.appendChild(g),f.appendChild(w),f.appendChild(T),f.appendChild(W),f.appendChild(E),d.appendChild(f)}(m,h,d,a);for(let e=1;e<25;e++)l(s[e],h,e,a,"hour");for(let e=1;e<8;e++)l(p[e],h,e,a,"day");i=d}function l(e,o,l,a,d){let m,s,p,h,y,C,f,S;m="hour"==d?document.querySelector(".hourly"):document.querySelector(".daily"),null==i?(s=document.createElement("ul"),s.id=`${d}${l}Weather-ul`,p=document.createElement("li"),p.id=`${d}${l}Time-li`,h=document.createElement("img"),h.id=`${d}${l}Weather-img`,y=document.createElement("li"),y.id=`${d}${l}WeatherDesc-li`,"hour"==d?(C=document.createElement("li"),C.id=`${d}${l}TempText-li`):(f=document.createElement("li"),f.id=`${d}${l}MinTempText-li`,S=document.createElement("li"),S.id=`${d}${l}MaxTempText-li`)):(s=document.querySelector(`#${d}${l}Weather-ul`),p=document.querySelector(`#${d}${l}Time-li`),h=document.querySelector(`#${d}${l}Weather-img`),y=document.querySelector(`#${d}${l}WeatherDesc-li`),"hour"==d?C=document.querySelector(`#${d}${l}TempText-li`):(f=document.querySelector(`#${d}${l}MinTempText-li`),S=document.querySelector(`#${d}${l}MaxTempText-li`)));const $=r(o,e.dt);if(h.src=u($,e.weather[0].description,d),y.textContent=n(e.weather[0].description),"hour"==d){const n=c($);p.textContent=n,C.textContent="metric"==a?t(e.temp)+"°C":t(e.temp)+"°F"}else{const n=$.split(" ").slice(0,3).join(" ");p.textContent=n,f.textContent="metric"==a?"Min: "+t(e.temp.min)+"°C":"Min: "+t(e.temp.min)+"°F",S.textContent="metric"==a?"Max: "+t(e.temp.max)+"°C":"Max: "+t(e.temp.max)+"°F"}s.appendChild(p),s.appendChild(h),s.appendChild(y),"hour"==d?s.appendChild(C):(s.appendChild(f),s.appendChild(S)),m.appendChild(s)}function u(e,t,n){const r=t.toLowerCase(),c="hour"==n?function(e){const t=e.split(" ")[4],n=t.split(":")[0],r=t.split(":")[1].slice(2);let c;return c=n>=7&&"pm"==r||n<=6&&"am"==r?"night":"day",c}(e):"day";let i;return r.includes("thunderstorm")?i="11d":["drizzle","shower rain"].includes(r)?i="09d":r.includes("rain")&&"freezing rain"!=r&&!r.includes("snow")?i="day"==c?"10d":"10n":r.includes("freezing rain")||r.includes("snow")||r.includes("sleet")?i="13d":["mist","smoke","haze","sand","fog","dust","volcanic ash","squails","tornado"].includes(r)?i="50d":r.includes("clear sky")?i="day"==c?"01d":"01n":"few clouds"==r?i="day"==c?"02d":"02n":"scattered clouds"==r?i="day"==c?"03d":"03n":["broken clouds","overcast clouds"].includes(r)&&(i="day"==c?"04d":"04n"),`http://openweathermap.org/img/wn/${i}@2x.png`}function a(e,n){const r=function(e,n){const r=e.textContent.match(/\d+/)[0];let c;return c="metric"==n?function(e){return t((e-32)/1.8)}(r):function(e){return t(1.8*e+32)}(r),c}(e,n);e.textContent="metric"==n?r+"°C":r+"°F"}const d="36b3c347e210c2acb6e17f82bab1563c",m=async function(t){t.preventDefault();try{const t=e(),n=await async function(e){try{const e=document.querySelector("#search-bar").value;console.log("searched location: "+e);const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&exclude=minutely&appid=${d}`),n=await t.json();return console.log(n),{coord:n.coord,location:e}}catch(e){console.log(e)}}(),r=n.coord,c=n.location,i=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${r.lat}&lon=${r.lon}&units=${t}&exclude=minutely&appid=${d}`);return{data:await i.json(),location:c}}catch{console.log(error)}},s="36b3c347e210c2acb6e17f82bab1563c";document.onload=async function(){try{const t=e(),n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Singapore&exclude=minutes&appid=${s}`),r=(await n.json()).coord,c=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${r.lat}&lon=${r.lon}&units=${t}&exclude=minutes&appid=${s}`);o({data:await c.json(),location:"Singapore"})}catch(e){console.log(e)}}(),function(){const t=document.querySelector("#search-icon");e(),t.addEventListener("click",(async e=>{o(await m(e))})),t.addEventListener("keyup",(async e=>{"Enter"==e.key&&o(await m(e))}))}(),function(){const t=document.querySelectorAll("button");let n=document.querySelector("#metric");t.forEach((t=>t.addEventListener("click",(t=>{t.preventDefault(),t.currentTarget.classList.add("active"),n!=t.currentTarget&&(n.classList.remove("active"),n=t.currentTarget,function(e){a(document.querySelector("#currTempText-li"),e),a(document.querySelector("#currFeelsLike-li"),e);for(let t=1;t<25;t++)a(document.querySelector(`#hour${t}TempText-li`),e);for(let t=1;t<8;t++)a(document.querySelector(`#day${t}MinTempText-li`),e),a(document.querySelector(`#day${t}MaxTempText-li`),e)}(e()))}))))}()})();