(()=>{"use strict";function e(e){return Math.round(1*e)/1}function t(e){return e.charAt(0).toUpperCase()+e.slice(1)}function n(e,t){return function(e){let t;t=e.replace("GMT",""),t=t.replace(",","");const n=t.split(" "),c=function(e){const t=e.split(":");return("12"!=t[0]?t[0]%12:12)+":"+t[1]+(t[0]>=12?"pm":"am")}(n[4]);return n[4]=c,t=n.join(" "),t}(new Date(1e3*t+1e3*e).toUTCString())}let c=null;function r(r,a,i,l,u){let d,s,m,p,h,y,$,f;d="hour"==u?document.querySelector(".hourly"):document.querySelector(".daily"),null==c?(s=document.createElement("ul"),s.id=`${u}${i}Weather-ul`,m=document.createElement("li"),m.id=`${u}${i}Time-li`,p=document.createElement("img"),p.id=`${u}${i}Weather-img`,h=document.createElement("li"),h.id=`${u}${i}WeatherDesc-li`,"hour"==u?(y=document.createElement("li"),y.id=`${u}${i}TemperatureText-li`):($=document.createElement("li"),$.id=`${u}${i}minTempText-li`,f=document.createElement("li"),f.id=`${u}${i}maxTempText-li`)):(s=document.querySelector(`#${u}${i}Weather-ul`),m=document.querySelector(`#${u}${i}Time-li`),p=document.querySelector(`#${u}${i}Weather-img`),h=document.querySelector(`#${u}${i}WeatherDesc-li`),"hour"==u?y=document.querySelector(`#${u}${i}TemperatureText-li`):($=document.querySelector(`#${u}${i}minTempText-li`),f=document.querySelector(`#${u}${i}maxTempText-li`)));const x=n(a,r.dt);if(p.src=o(x,r.weather[0].description,u),h.textContent=t(r.weather[0].description),"hour"==u){const t=function(e){const t=e.split(" ");return"0:00am"==t[4]?"12:00am":t[4]}(x);m.textContent=t,y.textContent="metric"==l?e(r.temp)+"°C":e(r.temp)+"°F"}else{const t=x.split(" ").slice(0,3).join(" ");m.textContent=t,$.textContent="metric"==l?"Min: "+e(r.temp.min)+"°C":"Min: "+e(r.temp.min)+"°F",f.textContent="metric"==l?"Max: "+e(r.temp.max)+"°C":"Max: "+e(r.temp.max)+"°F"}s.appendChild(m),s.appendChild(p),s.appendChild(h),"hour"==u?s.appendChild(y):(s.appendChild($),s.appendChild(f)),d.appendChild(s)}function o(e,t,n){const c=t.toLowerCase(),r="hour"==n?function(e){const t=e.split(" ")[4],n=t.split(":")[0],c=t.split(":")[1].slice(2);let r;return r=n>=7&&"pm"==c||n<=6&&"am"==c?"night":"day",r}(e):"day";let o;return c.includes("thunderstorm")?o="11d":["drizzle","shower rain"].includes(c)?o="09d":c.includes("rain")&&"freezing rain"!=c&&!c.includes("snow")?o="day"==r?"10d":"10n":c.includes("freezing rain")||c.includes("snow")||c.includes("sleet")?o="13d":["mist","smoke","haze","sand","fog","dust","volcanic ash","squails","tornado"].includes(c)?o="50d":c.includes("clear sky")?o="day"==r?"01d":"01n":"few clouds"==c?o="day"==r?"02d":"02n":"scattered clouds"==c?o="day"==r?"03d":"03n":["broken clouds","overcast clouds"].includes(c)&&(o="day"==r?"04d":"04n"),`http://openweathermap.org/img/wn/${o}@2x.png`}const a=function(a){const i=document.querySelector("#metric").classList.contains("active")?"metric":"imperial";console.log(a.data);const l=a.location,u=a.data.current,d=a.data.hourly,s=a.data.daily,m=a.data.timezone_offset;!function(r,a,i,l){const u=document.querySelector(".current");let d,s,m,p,h,y;null==c?(d=document.createElement("ul"),d.id="currWeather-ul",s=document.createElement("li"),s.id="currTime-li",m=document.createElement("li"),m.id="currLocationText-li",p=document.createElement("img"),p.id="currWeather-img",h=document.createElement("li"),h.id="currWeatherDesc-li",y=document.createElement("li"),y.id="currTemperatureText-li"):(d=document.querySelector("#currWeather-ul"),s=document.querySelector("#currTime-li"),m=document.querySelector("#currLocationText-li"),p=document.querySelector("#currWeather-img"),h=document.querySelector("#currWeatherDesc-li"),y=document.querySelector("#currTemperatureText-li"));const $=n(a,r.dt);s.textContent=$,m.textContent=function(e){const t=e.split(" ");for(let e=0;e<t.length;e++)t[e]=t[e].charAt(0).toUpperCase()+t[e].slice(1);return t.join(" ")}(i),p.src=o($,r.weather[0].description),h.textContent=t(r.weather[0].description),y.textContent="metric"==l?e(r.temp)+"°C":e(r.temp)+"°F",d.appendChild(s),d.appendChild(m),d.appendChild(p),d.appendChild(h),d.appendChild(y),u.appendChild(d)}(u,m,l,i);for(let e=1;e<25;e++)r(d[e],m,e,i,"hour");for(let e=1;e<8;e++)r(s[e],m,e,i,"day");c=l},i="36b3c347e210c2acb6e17f82bab1563c",l=async function(e){e.preventDefault();try{const e=await async function(e){try{const e=document.querySelector("#search-bar").value;console.log("searched location: "+e);const t=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${e}&exclude=minutely&appid=${i}`),n=await t.json();return console.log(n),{coord:n.coord,location:e}}catch(e){console.log(e)}}(),t=e.coord,n=e.location,c="metric",r=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=${c}&exclude=minutely&appid=${i}`);return{data:await r.json(),location:n}}catch{console.log(error)}},u="36b3c347e210c2acb6e17f82bab1563c";document.onload=async function(){try{const e=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=Singapore&exclude=minutes&appid=${u}`),t=(await e.json()).coord,n=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${t.lat}&lon=${t.lon}&units=metric&exclude=minutes&appid=${u}`),c=await n.json();a({data:c,location:"Singapore"})}catch(e){console.log(e)}}(),function(){const e=document.querySelector("#search-icon");e.addEventListener("click",(async e=>{const t=await l(e);a(t)})),e.addEventListener("keyup",(async e=>{if("Enter"==e.key){const t=await l(e);a(t)}}))}(),function(){const e=document.querySelectorAll("button");let t=document.querySelector("#metric");e.forEach((e=>e.addEventListener("click",(e=>{e.preventDefault(),e.currentTarget.classList.add("active"),t!=e.currentTarget&&t.classList.remove("active"),t=e.currentTarget}))))}()})();